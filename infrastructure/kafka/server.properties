# Kafka server configuration for L2 market data
# Optimized for high-throughput, low-latency financial data

# Broker configuration
broker.id=1
listeners=PLAINTEXT://0.0.0.0:29092,PLAINTEXT_HOST://0.0.0.0:9092
advertised.listeners=PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092
listener.security.protocol.map=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT

# Zookeeper connection
zookeeper.connect=zookeeper:2181
zookeeper.connection.timeout.ms=18000

# Log configuration optimized for market data
log.dirs=/var/lib/kafka/data
num.network.threads=8
num.io.threads=16
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# Log retention for market data
log.retention.hours=24
log.retention.bytes=1073741824
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000

# Performance optimizations for financial data
replica.fetch.max.bytes=1048576
message.max.bytes=1048576
compression.type=lz4
log.compression.type=lz4

# Topic configuration
auto.create.topics.enable=false
default.replication.factor=1
min.insync.replicas=1

# Producer optimizations
acks=1
batch.size=65536
linger.ms=5
compression.type=lz4

# Consumer optimizations
fetch.min.bytes=1024
fetch.max.wait.ms=500

# JVM heap settings for high-frequency data
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1